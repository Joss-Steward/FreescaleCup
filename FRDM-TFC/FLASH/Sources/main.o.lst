   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_f2d
  18              		.section	.rodata
  19              		.align	2
  20              	.LC0:
  21 0000 7B227665 		.ascii	"{\"version\":0,\"sensitivity\":%d,\"speed\":%f,\"da"
  21      7273696F 
  21      6E223A30 
  21      2C227365 
  21      6E736974 
  22 002c 7461223A 		.ascii	"ta\":[\000"
  22      5B00
  23 0032 0000     		.align	2
  24              	.LC2:
  25 0034 5D7D00   		.ascii	"]}\000"
  26 0037 00       		.section	.text.main,"ax",%progbits
  27              		.align	2
  28              		.global	main
  29              		.code	16
  30              		.thumb_func
  32              	main:
  33              	.LFB0:
  34              		.file 1 "../Sources/main.c"
   1:../Sources/main.c **** #include "derivative.h" /* include peripheral declarations */
   2:../Sources/main.c **** #include "TFC\TFC.h"
   3:../Sources/main.c **** #include "Algorithms.h"
   4:../Sources/main.c **** #include "Common.h"
   5:../Sources/main.c **** #include "InitCar.h"
   6:../Sources/main.c **** #include "Camera.h"
   7:../Sources/main.c **** #include "stdlib.h"
   8:../Sources/main.c **** #include "Control.h"
   9:../Sources/main.c **** #include "SerialComms.h"
  10:../Sources/main.c **** 
  11:../Sources/main.c **** 
  12:../Sources/main.c **** // TODO Comment all the things
  13:../Sources/main.c **** int main(){
  35              		.loc 1 13 0
  36              		.cfi_startproc
  37 0000 90B5     		push	{r4, r7, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 12
  40              		.cfi_offset 4, -12
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0002 8DB0     		sub	sp, sp, #52
  44              	.LCFI1:
  45              		.cfi_def_cfa_offset 64
  46 0004 02AF     		add	r7, sp, #8
  47              	.LCFI2:
  48              		.cfi_def_cfa 7, 56
  14:../Sources/main.c **** 	
  15:../Sources/main.c **** 	// Initialise program
  16:../Sources/main.c **** 	init();		
  49              		.loc 1 16 0
  50 0006 FFF7FEFF 		bl	init
  17:../Sources/main.c **** 	
  18:../Sources/main.c **** 	// Used to indicate stopping
  19:../Sources/main.c **** 	int run = 1;
  51              		.loc 1 19 0
  52 000a 0123     		mov	r3, #1
  53 000c 7B62     		str	r3, [r7, #36]
  20:../Sources/main.c **** 	
  21:../Sources/main.c **** 	int first = 1;
  54              		.loc 1 21 0
  55 000e 0123     		mov	r3, #1
  56 0010 3B62     		str	r3, [r7, #32]
  22:../Sources/main.c **** 	int sensitivity;
  23:../Sources/main.c **** 	float speed;
  24:../Sources/main.c **** 	
  25:../Sources/main.c **** 	// Pointers for referencing data
  26:../Sources/main.c **** 	uint8_t* cameraData;
  27:../Sources/main.c **** 	struct Command command;
  28:../Sources/main.c **** 	command.speedL = 0.0;
  57              		.loc 1 28 0
  58 0012 3B1D     		add	r3, r7, #4
  59 0014 0022     		mov	r2, #0
  60 0016 5A60     		str	r2, [r3, #4]
  29:../Sources/main.c **** 	command.speedR = 0.0;
  61              		.loc 1 29 0
  62 0018 3B1D     		add	r3, r7, #4
  63 001a 0022     		mov	r2, #0
  64 001c 9A60     		str	r2, [r3, #8]
  30:../Sources/main.c **** 	command.steerValue = 0.0;
  65              		.loc 1 30 0
  66 001e 3B1D     		add	r3, r7, #4
  67 0020 0022     		mov	r2, #0
  68 0022 1A60     		str	r2, [r3]
  31:../Sources/main.c **** 	command.stop = 0;
  69              		.loc 1 31 0
  70 0024 3B1D     		add	r3, r7, #4
  71 0026 0022     		mov	r2, #0
  72 0028 DA60     		str	r2, [r3, #12]
  73              	.L11:
  32:../Sources/main.c **** 	
  33:../Sources/main.c **** 	while(1){
  34:../Sources/main.c **** 
  35:../Sources/main.c **** 		// Waits till the start button is pressed
  36:../Sources/main.c **** 		while(!START_BUTTON);	
  74              		.loc 1 36 0
  75 002a C046     		mov	r8, r8
  76              	.L2:
  77              		.loc 1 36 0 is_stmt 0
  78 002c 364B     		ldr	r3, .L13
  79 002e 1A69     		ldr	r2, [r3, #16]
  80 0030 8023     		mov	r3, #128
  81 0032 9B01     		lsl	r3, r3, #6
  82 0034 1340     		and	r3, r2
  83 0036 F9D0     		beq	.L2
  37:../Sources/main.c **** 		
  38:../Sources/main.c **** 		sensitivity = getSensitivity();
  84              		.loc 1 38 0 is_stmt 1
  85 0038 FFF7FEFF 		bl	getSensitivity
  86 003c 031C     		mov	r3, r0
  87 003e FB61     		str	r3, [r7, #28]
  39:../Sources/main.c **** 		speed = getSpeed();
  88              		.loc 1 39 0
  89 0040 FFF7FEFF 		bl	getSpeed
  90 0044 031C     		add	r3, r0, #0
  91 0046 BB61     		str	r3, [r7, #24]
  40:../Sources/main.c **** 		TFC_HBRIDGE_ENABLE;
  92              		.loc 1 40 0
  93 0048 304B     		ldr	r3, .L13+4
  94 004a 8022     		mov	r2, #128
  95 004c 9203     		lsl	r2, r2, #14
  96 004e 5A60     		str	r2, [r3, #4]
  41:../Sources/main.c **** 		
  42:../Sources/main.c **** 		printf("{\"version\":0,\"sensitivity\":%d,\"speed\":%f,\"data\":[", sensitivity, speed);
  97              		.loc 1 42 0
  98 0050 B869     		ldr	r0, [r7, #24]
  99 0052 FFF7FEFF 		bl	__aeabi_f2d
 100 0056 031C     		mov	r3, r0
 101 0058 0C1C     		mov	r4, r1
 102 005a 2D49     		ldr	r1, .L13+8
 103 005c FA69     		ldr	r2, [r7, #28]
 104 005e 081C     		mov	r0, r1
 105 0060 111C     		mov	r1, r2
 106 0062 1A1C     		mov	r2, r3
 107 0064 231C     		mov	r3, r4
 108 0066 FFF7FEFF 		bl	printf
  43:../Sources/main.c **** 		
  44:../Sources/main.c **** 		while(run){
 109              		.loc 1 44 0
 110 006a 3DE0     		b	.L3
 111              	.L9:
  45:../Sources/main.c **** 			
  46:../Sources/main.c **** 			if(first){	
 112              		.loc 1 46 0
 113 006c 3B6A     		ldr	r3, [r7, #32]
 114 006e 002B     		cmp	r3, #0
 115 0070 02D0     		beq	.L4
  47:../Sources/main.c **** 				first = 0;
 116              		.loc 1 47 0
 117 0072 0023     		mov	r3, #0
 118 0074 3B62     		str	r3, [r7, #32]
 119 0076 02E0     		b	.L5
 120              	.L4:
  48:../Sources/main.c **** 			} else {
  49:../Sources/main.c **** 				printf(",");
 121              		.loc 1 49 0
 122 0078 2C20     		mov	r0, #44
 123 007a FFF7FEFF 		bl	putchar
 124              	.L5:
  50:../Sources/main.c **** 			}
  51:../Sources/main.c **** 			
  52:../Sources/main.c **** 			// Reads the data from the camera
  53:../Sources/main.c **** 			cameraData = getCamera();	
 125              		.loc 1 53 0
 126 007e FFF7FEFF 		bl	getCamera
 127 0082 031C     		mov	r3, r0
 128 0084 7B61     		str	r3, [r7, #20]
  54:../Sources/main.c **** 			
  55:../Sources/main.c **** 			// Sets the command based on the camera data and returns whether to stop or not
  56:../Sources/main.c **** 			run = getCommand( cameraData, &command, sensitivity, speed );	
 129              		.loc 1 56 0
 130 0086 7869     		ldr	r0, [r7, #20]
 131 0088 391D     		add	r1, r7, #4
 132 008a FA69     		ldr	r2, [r7, #28]
 133 008c BB69     		ldr	r3, [r7, #24]
 134 008e FFF7FEFF 		bl	getCommand
 135 0092 031C     		mov	r3, r0
 136 0094 7B62     		str	r3, [r7, #36]
  57:../Sources/main.c **** 			
  58:../Sources/main.c **** 			// Debug mode
  59:../Sources/main.c **** 			if(TFC_GetDIP_Switch()){	
 137              		.loc 1 59 0
 138 0096 FFF7FEFF 		bl	TFC_GetDIP_Switch
 139 009a 031C     		mov	r3, r0
 140 009c 002B     		cmp	r3, #0
 141 009e 09D0     		beq	.L6
  60:../Sources/main.c **** 				
  61:../Sources/main.c **** 				// Sends the command and camera data over serial
  62:../Sources/main.c **** 				print(command, cameraData);
 142              		.loc 1 62 0
 143 00a0 3B1D     		add	r3, r7, #4
 144 00a2 7A69     		ldr	r2, [r7, #20]
 145 00a4 0092     		str	r2, [sp]
 146 00a6 1868     		ldr	r0, [r3]
 147 00a8 5968     		ldr	r1, [r3, #4]
 148 00aa 9A68     		ldr	r2, [r3, #8]
 149 00ac DB68     		ldr	r3, [r3, #12]
 150 00ae FFF7FEFF 		bl	print
 151 00b2 0FE0     		b	.L7
 152              	.L6:
  63:../Sources/main.c **** 				
  64:../Sources/main.c **** 				// Run mode	
  65:../Sources/main.c **** 			} else {	
  66:../Sources/main.c **** 				
  67:../Sources/main.c **** 				// Sends the command and camera data over serial to be stored
  68:../Sources/main.c **** 				print(command, cameraData);
 153              		.loc 1 68 0
 154 00b4 3B1D     		add	r3, r7, #4
 155 00b6 7A69     		ldr	r2, [r7, #20]
 156 00b8 0092     		str	r2, [sp]
 157 00ba 1868     		ldr	r0, [r3]
 158 00bc 5968     		ldr	r1, [r3, #4]
 159 00be 9A68     		ldr	r2, [r3, #8]
 160 00c0 DB68     		ldr	r3, [r3, #12]
 161 00c2 FFF7FEFF 		bl	print
  69:../Sources/main.c **** 				
  70:../Sources/main.c **** 				// Applies the command to the car
  71:../Sources/main.c **** 				apply(command);
 162              		.loc 1 71 0
 163 00c6 3B1D     		add	r3, r7, #4
 164 00c8 1868     		ldr	r0, [r3]
 165 00ca 5968     		ldr	r1, [r3, #4]
 166 00cc 9A68     		ldr	r2, [r3, #8]
 167 00ce DB68     		ldr	r3, [r3, #12]
 168 00d0 FFF7FEFF 		bl	apply
 169              	.L7:
  72:../Sources/main.c **** 				
  73:../Sources/main.c **** 			}
  74:../Sources/main.c **** 
  75:../Sources/main.c **** 			// Frees the malloc'd memory for cameraData and command
  76:../Sources/main.c **** 			free(cameraData);
 170              		.loc 1 76 0
 171 00d4 7B69     		ldr	r3, [r7, #20]
 172 00d6 181C     		mov	r0, r3
 173 00d8 FFF7FEFF 		bl	free
  77:../Sources/main.c **** 			
  78:../Sources/main.c **** 			// Exits the loop if the stop button is pressed
  79:../Sources/main.c **** 			if(STOP_BUTTON) break;
 174              		.loc 1 79 0
 175 00dc 0A4B     		ldr	r3, .L13
 176 00de 1A69     		ldr	r2, [r3, #16]
 177 00e0 8023     		mov	r3, #128
 178 00e2 9B02     		lsl	r3, r3, #10
 179 00e4 1340     		and	r3, r2
 180 00e6 03D1     		bne	.L12
 181              	.L3:
  44:../Sources/main.c **** 		while(run){
 182              		.loc 1 44 0
 183 00e8 7B6A     		ldr	r3, [r7, #36]
 184 00ea 002B     		cmp	r3, #0
 185 00ec BED1     		bne	.L9
 186 00ee 00E0     		b	.L8
 187              	.L12:
 188              		.loc 1 79 0
 189 00f0 C046     		mov	r8, r8
 190              	.L8:
  80:../Sources/main.c **** 		}
  81:../Sources/main.c **** 		
  82:../Sources/main.c **** 		TFC_HBRIDGE_DISABLE;
 191              		.loc 1 82 0
 192 00f2 064B     		ldr	r3, .L13+4
 193 00f4 8022     		mov	r2, #128
 194 00f6 9203     		lsl	r2, r2, #14
 195 00f8 9A60     		str	r2, [r3, #8]
  83:../Sources/main.c **** 		
  84:../Sources/main.c **** 		printf("]}");
 196              		.loc 1 84 0
 197 00fa 064B     		ldr	r3, .L13+12
 198 00fc 181C     		mov	r0, r3
 199 00fe FFF7FEFF 		bl	printf
  85:../Sources/main.c **** 		
  86:../Sources/main.c **** 	}
 200              		.loc 1 86 0
 201 0102 C046     		mov	r8, r8
  36:../Sources/main.c **** 		while(!START_BUTTON);	
 202              		.loc 1 36 0
 203 0104 91E7     		b	.L11
 204              	.L14:
 205 0106 C046     		.align	2
 206              	.L13:
 207 0108 80F00F40 		.word	1074786432
 208 010c 00F10F40 		.word	1074786560
 209 0110 00000000 		.word	.LC0
 210 0114 34000000 		.word	.LC2
 211              		.cfi_endproc
 212              	.LFE0:
 214              		.text
 215              	.Letext0:
 216              		.file 2 "C:/Freescale/CW MCU v10.6/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 217              		.file 3 "C:/Users/Jared/Desktop/freescalecup/FRDM-TFC/Project_Headers/MKL25Z4.h"
 218              		.file 4 "../Sources/Common.h"
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Jared\AppData\Local\Temp\ccrYSyZG.s:19     .rodata:00000000 $d
C:\Users\Jared\AppData\Local\Temp\ccrYSyZG.s:27     .text.main:00000000 $t
C:\Users\Jared\AppData\Local\Temp\ccrYSyZG.s:32     .text.main:00000000 main
C:\Users\Jared\AppData\Local\Temp\ccrYSyZG.s:207    .text.main:00000108 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_f2d
init
getSensitivity
getSpeed
printf
putchar
getCamera
getCommand
TFC_GetDIP_Switch
print
apply
free
