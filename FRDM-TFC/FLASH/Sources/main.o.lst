   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_f2d
  18              		.section	.rodata
  19              		.align	2
  20              	.LC0:
  21 0000 7B227665 		.ascii	"{\"version\":0,\"sensitivity\":%d,\"speed\":%f,\"da"
  21      7273696F 
  21      6E223A30 
  21      2C227365 
  21      6E736974 
  22 002c 7461223A 		.ascii	"ta\":[\000"
  22      5B00
  23 0032 0000     		.align	2
  24              	.LC2:
  25 0034 5D7D00   		.ascii	"]}\000"
  26 0037 00       		.section	.text.main,"ax",%progbits
  27              		.align	2
  28              		.global	main
  29              		.code	16
  30              		.thumb_func
  32              	main:
  33              	.LFB0:
  34              		.file 1 "../Sources/main.c"
   1:../Sources/main.c **** #include "derivative.h" /* include peripheral declarations */
   2:../Sources/main.c **** #include "TFC\TFC.h"
   3:../Sources/main.c **** #include "Algorithms.h"
   4:../Sources/main.c **** #include "Common.h"
   5:../Sources/main.c **** #include "InitCar.h"
   6:../Sources/main.c **** #include "Camera.h"
   7:../Sources/main.c **** #include "stdlib.h"
   8:../Sources/main.c **** #include "Control.h"
   9:../Sources/main.c **** #include "SerialComms.h"
  10:../Sources/main.c **** 
  11:../Sources/main.c **** 
  12:../Sources/main.c **** // TODO Comment all the things
  13:../Sources/main.c **** int main(){
  35              		.loc 1 13 0
  36              		.cfi_startproc
  37 0000 90B5     		push	{r4, r7, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 12
  40              		.cfi_offset 4, -12
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0002 8DB0     		sub	sp, sp, #52
  44              	.LCFI1:
  45              		.cfi_def_cfa_offset 64
  46 0004 02AF     		add	r7, sp, #8
  47              	.LCFI2:
  48              		.cfi_def_cfa 7, 56
  14:../Sources/main.c **** 	
  15:../Sources/main.c **** 	// Initialise program
  16:../Sources/main.c **** 	init();		
  49              		.loc 1 16 0
  50 0006 FFF7FEFF 		bl	init
  17:../Sources/main.c **** 	
  18:../Sources/main.c **** 	// Used to indicate stopping
  19:../Sources/main.c **** 	int run = 1;
  51              		.loc 1 19 0
  52 000a 0123     		mov	r3, #1
  53 000c 7B62     		str	r3, [r7, #36]
  20:../Sources/main.c **** 	
  21:../Sources/main.c **** 	int first = 1;
  54              		.loc 1 21 0
  55 000e 0123     		mov	r3, #1
  56 0010 3B62     		str	r3, [r7, #32]
  22:../Sources/main.c **** 	int sensitivity;
  23:../Sources/main.c **** 	float speed;
  24:../Sources/main.c **** 	
  25:../Sources/main.c **** 	// Pointers for referencing data
  26:../Sources/main.c **** 	uint8_t* cameraData;
  27:../Sources/main.c **** 	struct Command command;
  28:../Sources/main.c **** 	command.speedL = 0.0;
  57              		.loc 1 28 0
  58 0012 3B1D     		add	r3, r7, #4
  59 0014 0022     		mov	r2, #0
  60 0016 5A60     		str	r2, [r3, #4]
  29:../Sources/main.c **** 	command.speedR = 0.0;
  61              		.loc 1 29 0
  62 0018 3B1D     		add	r3, r7, #4
  63 001a 0022     		mov	r2, #0
  64 001c 9A60     		str	r2, [r3, #8]
  30:../Sources/main.c **** 	command.steerValue = 0.0;
  65              		.loc 1 30 0
  66 001e 3B1D     		add	r3, r7, #4
  67 0020 0022     		mov	r2, #0
  68 0022 1A60     		str	r2, [r3]
  31:../Sources/main.c **** 	command.stop = 0;
  69              		.loc 1 31 0
  70 0024 3B1D     		add	r3, r7, #4
  71 0026 0022     		mov	r2, #0
  72 0028 DA60     		str	r2, [r3, #12]
  73              	.L9:
  32:../Sources/main.c **** 	
  33:../Sources/main.c **** 	while(1){
  34:../Sources/main.c **** 
  35:../Sources/main.c **** 		// Waits till the start button is pressed
  36:../Sources/main.c **** 		while(!START_BUTTON);	
  74              		.loc 1 36 0
  75 002a C046     		mov	r8, r8
  76              	.L2:
  77              		.loc 1 36 0 is_stmt 0
  78 002c 2E4B     		ldr	r3, .L11
  79 002e 1A69     		ldr	r2, [r3, #16]
  80 0030 8023     		mov	r3, #128
  81 0032 9B01     		lsl	r3, r3, #6
  82 0034 1340     		and	r3, r2
  83 0036 F9D0     		beq	.L2
  37:../Sources/main.c **** 		
  38:../Sources/main.c **** 		sensitivity = getSensitivity();
  84              		.loc 1 38 0 is_stmt 1
  85 0038 FFF7FEFF 		bl	getSensitivity
  86 003c 031C     		mov	r3, r0
  87 003e FB61     		str	r3, [r7, #28]
  39:../Sources/main.c **** 		speed = getSpeed();
  88              		.loc 1 39 0
  89 0040 FFF7FEFF 		bl	getSpeed
  90 0044 031C     		add	r3, r0, #0
  91 0046 BB61     		str	r3, [r7, #24]
  40:../Sources/main.c **** 		TFC_HBRIDGE_ENABLE;
  92              		.loc 1 40 0
  93 0048 284B     		ldr	r3, .L11+4
  94 004a 8022     		mov	r2, #128
  95 004c 9203     		lsl	r2, r2, #14
  96 004e 5A60     		str	r2, [r3, #4]
  41:../Sources/main.c **** 		
  42:../Sources/main.c **** 		printf("{\"version\":0,\"sensitivity\":%d,\"speed\":%f,\"data\":[", sensitivity, speed);
  97              		.loc 1 42 0
  98 0050 B869     		ldr	r0, [r7, #24]
  99 0052 FFF7FEFF 		bl	__aeabi_f2d
 100 0056 031C     		mov	r3, r0
 101 0058 0C1C     		mov	r4, r1
 102 005a 2549     		ldr	r1, .L11+8
 103 005c FA69     		ldr	r2, [r7, #28]
 104 005e 081C     		mov	r0, r1
 105 0060 111C     		mov	r1, r2
 106 0062 1A1C     		mov	r2, r3
 107 0064 231C     		mov	r3, r4
 108 0066 FFF7FEFF 		bl	printf
  43:../Sources/main.c **** 		
  44:../Sources/main.c **** 		while(run){
 109              		.loc 1 44 0
 110 006a 2EE0     		b	.L3
 111              	.L7:
  45:../Sources/main.c **** 			
  46:../Sources/main.c **** 			if(first){	
 112              		.loc 1 46 0
 113 006c 3B6A     		ldr	r3, [r7, #32]
 114 006e 002B     		cmp	r3, #0
 115 0070 02D0     		beq	.L4
  47:../Sources/main.c **** 				first = 0;
 116              		.loc 1 47 0
 117 0072 0023     		mov	r3, #0
 118 0074 3B62     		str	r3, [r7, #32]
 119 0076 02E0     		b	.L5
 120              	.L4:
  48:../Sources/main.c **** 			} else {
  49:../Sources/main.c **** 				printf(",");
 121              		.loc 1 49 0
 122 0078 2C20     		mov	r0, #44
 123 007a FFF7FEFF 		bl	putchar
 124              	.L5:
  50:../Sources/main.c **** 			}
  51:../Sources/main.c **** 			
  52:../Sources/main.c **** 			// Reads the data from the camera
  53:../Sources/main.c **** 			cameraData = getCamera();	
 125              		.loc 1 53 0
 126 007e FFF7FEFF 		bl	getCamera
 127 0082 031C     		mov	r3, r0
 128 0084 7B61     		str	r3, [r7, #20]
  54:../Sources/main.c **** 			
  55:../Sources/main.c **** 			// Sets the command based on the camera data and returns whether to stop or not
  56:../Sources/main.c **** 			run = getCommand( cameraData, &command, sensitivity, speed );	
 129              		.loc 1 56 0
 130 0086 7869     		ldr	r0, [r7, #20]
 131 0088 391D     		add	r1, r7, #4
 132 008a FA69     		ldr	r2, [r7, #28]
 133 008c BB69     		ldr	r3, [r7, #24]
 134 008e FFF7FEFF 		bl	getCommand
 135 0092 031C     		mov	r3, r0
 136 0094 7B62     		str	r3, [r7, #36]
  57:../Sources/main.c **** 			
  58:../Sources/main.c **** 			// Debug mode
  59:../Sources/main.c **** 			if(0){	
  60:../Sources/main.c **** 				
  61:../Sources/main.c **** 				// Sends the command and camera data over serial
  62:../Sources/main.c **** 				print(command, cameraData);
  63:../Sources/main.c **** 				
  64:../Sources/main.c **** 				// Run mode	
  65:../Sources/main.c **** 			} else {	
  66:../Sources/main.c **** 				
  67:../Sources/main.c **** 				// Sends the command and camera data over serial to be stored
  68:../Sources/main.c **** 				print(command, cameraData);
 137              		.loc 1 68 0
 138 0096 3B1D     		add	r3, r7, #4
 139 0098 7A69     		ldr	r2, [r7, #20]
 140 009a 0092     		str	r2, [sp]
 141 009c 1868     		ldr	r0, [r3]
 142 009e 5968     		ldr	r1, [r3, #4]
 143 00a0 9A68     		ldr	r2, [r3, #8]
 144 00a2 DB68     		ldr	r3, [r3, #12]
 145 00a4 FFF7FEFF 		bl	print
  69:../Sources/main.c **** 				
  70:../Sources/main.c **** 				// Applies the command to the car
  71:../Sources/main.c **** 				apply(command);
 146              		.loc 1 71 0
 147 00a8 3B1D     		add	r3, r7, #4
 148 00aa 1868     		ldr	r0, [r3]
 149 00ac 5968     		ldr	r1, [r3, #4]
 150 00ae 9A68     		ldr	r2, [r3, #8]
 151 00b0 DB68     		ldr	r3, [r3, #12]
 152 00b2 FFF7FEFF 		bl	apply
  72:../Sources/main.c **** 				
  73:../Sources/main.c **** 			}
  74:../Sources/main.c **** 
  75:../Sources/main.c **** 			// Frees the malloc'd memory for cameraData and command
  76:../Sources/main.c **** 			free(cameraData);
 153              		.loc 1 76 0
 154 00b6 7B69     		ldr	r3, [r7, #20]
 155 00b8 181C     		mov	r0, r3
 156 00ba FFF7FEFF 		bl	free
  77:../Sources/main.c **** 			
  78:../Sources/main.c **** 			// Exits the loop if the stop button is pressed
  79:../Sources/main.c **** 			if(STOP_BUTTON) break;
 157              		.loc 1 79 0
 158 00be 0A4B     		ldr	r3, .L11
 159 00c0 1A69     		ldr	r2, [r3, #16]
 160 00c2 8023     		mov	r3, #128
 161 00c4 9B02     		lsl	r3, r3, #10
 162 00c6 1340     		and	r3, r2
 163 00c8 03D1     		bne	.L10
 164              	.L3:
  44:../Sources/main.c **** 		while(run){
 165              		.loc 1 44 0
 166 00ca 7B6A     		ldr	r3, [r7, #36]
 167 00cc 002B     		cmp	r3, #0
 168 00ce CDD1     		bne	.L7
 169 00d0 00E0     		b	.L6
 170              	.L10:
 171              		.loc 1 79 0
 172 00d2 C046     		mov	r8, r8
 173              	.L6:
  80:../Sources/main.c **** 		}
  81:../Sources/main.c **** 		
  82:../Sources/main.c **** 		TFC_HBRIDGE_DISABLE;
 174              		.loc 1 82 0
 175 00d4 054B     		ldr	r3, .L11+4
 176 00d6 8022     		mov	r2, #128
 177 00d8 9203     		lsl	r2, r2, #14
 178 00da 9A60     		str	r2, [r3, #8]
  83:../Sources/main.c **** 		
  84:../Sources/main.c **** 		printf("]}");
 179              		.loc 1 84 0
 180 00dc 054B     		ldr	r3, .L11+12
 181 00de 181C     		mov	r0, r3
 182 00e0 FFF7FEFF 		bl	printf
  85:../Sources/main.c **** 		
  86:../Sources/main.c **** 	}
 183              		.loc 1 86 0
 184 00e4 C046     		mov	r8, r8
  36:../Sources/main.c **** 		while(!START_BUTTON);	
 185              		.loc 1 36 0
 186 00e6 A0E7     		b	.L9
 187              	.L12:
 188              		.align	2
 189              	.L11:
 190 00e8 80F00F40 		.word	1074786432
 191 00ec 00F10F40 		.word	1074786560
 192 00f0 00000000 		.word	.LC0
 193 00f4 34000000 		.word	.LC2
 194              		.cfi_endproc
 195              	.LFE0:
 197              		.text
 198              	.Letext0:
 199              		.file 2 "C:/Freescale/CW MCU v10.6/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 200              		.file 3 "C:/Users/Jared/Desktop/freescalecup/FRDM-TFC/Project_Headers/MKL25Z4.h"
 201              		.file 4 "../Sources/Common.h"
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Jared\AppData\Local\Temp\ccUilwbL.s:19     .rodata:00000000 $d
C:\Users\Jared\AppData\Local\Temp\ccUilwbL.s:27     .text.main:00000000 $t
C:\Users\Jared\AppData\Local\Temp\ccUilwbL.s:32     .text.main:00000000 main
C:\Users\Jared\AppData\Local\Temp\ccUilwbL.s:190    .text.main:000000e8 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_f2d
init
getSensitivity
getSpeed
printf
putchar
getCamera
getCommand
print
apply
free
