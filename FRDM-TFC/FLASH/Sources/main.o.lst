   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata
  18              		.align	2
  19              	.LC2:
  20 0000 7C0D00   		.ascii	"|\015\000"
  21              		.global	__aeabi_fmul
  22              		.global	__aeabi_f2iz
  23 0003 00       		.align	2
  24              	.LC4:
  25 0004 7B227665 		.ascii	"{\"version\":0,\"sensitivity\":%d,\"speed\":%d,\"da"
  25      7273696F 
  25      6E223A30 
  25      2C227365 
  25      6E736974 
  26 0030 7461223A 		.ascii	"ta\":[\000"
  26      5B00
  27 0036 0000     		.align	2
  28              	.LC6:
  29 0038 5D7D00   		.ascii	"]}\000"
  30 003b 00       		.section	.text.main,"ax",%progbits
  31              		.align	2
  32              		.global	main
  33              		.code	16
  34              		.thumb_func
  36              	main:
  37              	.LFB0:
  38              		.file 1 "../Sources/main.c"
   1:../Sources/main.c **** #include "derivative.h" /* include peripheral declarations */
   2:../Sources/main.c **** #include "TFC\TFC.h"
   3:../Sources/main.c **** #include "Algorithms.h"
   4:../Sources/main.c **** #include "Common.h"
   5:../Sources/main.c **** #include "InitCar.h"
   6:../Sources/main.c **** #include "Camera.h"
   7:../Sources/main.c **** #include "stdlib.h"
   8:../Sources/main.c **** #include "Control.h"
   9:../Sources/main.c **** #include "SerialComms.h"
  10:../Sources/main.c **** 
  11:../Sources/main.c **** 
  12:../Sources/main.c **** // TODO Comment all the things
  13:../Sources/main.c **** int main(){
  39              		.loc 1 13 0
  40              		.cfi_startproc
  41 0000 80B5     		push	{r7, lr}
  42              	.LCFI0:
  43              		.cfi_def_cfa_offset 8
  44              		.cfi_offset 7, -8
  45              		.cfi_offset 14, -4
  46 0002 8EB0     		sub	sp, sp, #56
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 64
  49 0004 02AF     		add	r7, sp, #8
  50              	.LCFI2:
  51              		.cfi_def_cfa 7, 56
  14:../Sources/main.c **** 	
  15:../Sources/main.c **** 	// Initialise program
  16:../Sources/main.c **** 	init();		
  52              		.loc 1 16 0
  53 0006 FFF7FEFF 		bl	init
  17:../Sources/main.c **** 	
  18:../Sources/main.c **** 	// Used to indicate stopping
  19:../Sources/main.c **** 	int run = 1;
  54              		.loc 1 19 0
  55 000a 0123     		mov	r3, #1
  56 000c FB62     		str	r3, [r7, #44]
  20:../Sources/main.c **** 	
  21:../Sources/main.c **** 	int first = 1;
  57              		.loc 1 21 0
  58 000e 0123     		mov	r3, #1
  59 0010 BB62     		str	r3, [r7, #40]
  22:../Sources/main.c **** 	int sensitivity;
  23:../Sources/main.c **** 	float speed;
  24:../Sources/main.c **** 	
  25:../Sources/main.c **** 	// Pointers for referencing data
  26:../Sources/main.c **** 	uint16_t* cameraData;
  27:../Sources/main.c **** 	struct Command command;
  28:../Sources/main.c **** 	command.speedL = 0.0;
  60              		.loc 1 28 0
  61 0012 3B1D     		add	r3, r7, #4
  62 0014 0022     		mov	r2, #0
  63 0016 5A60     		str	r2, [r3, #4]
  29:../Sources/main.c **** 	command.speedR = 0.0;
  64              		.loc 1 29 0
  65 0018 3B1D     		add	r3, r7, #4
  66 001a 0022     		mov	r2, #0
  67 001c 9A60     		str	r2, [r3, #8]
  30:../Sources/main.c **** 	command.steerValue = 0.0;
  68              		.loc 1 30 0
  69 001e 3B1D     		add	r3, r7, #4
  70 0020 0022     		mov	r2, #0
  71 0022 1A60     		str	r2, [r3]
  31:../Sources/main.c **** 	command.stop = 0;
  72              		.loc 1 31 0
  73 0024 3B1D     		add	r3, r7, #4
  74 0026 0022     		mov	r2, #0
  75 0028 DA60     		str	r2, [r3, #12]
  32:../Sources/main.c **** 	
  33:../Sources/main.c **** 	int i;
  34:../Sources/main.c **** 	TFC_SetLineScanExposureTime(25000);
  76              		.loc 1 34 0
  77 002a 584B     		ldr	r3, .L21
  78 002c 181C     		mov	r0, r3
  79 002e FFF7FEFF 		bl	TFC_SetLineScanExposureTime
  35:../Sources/main.c **** 	
  36:../Sources/main.c **** 	
  37:../Sources/main.c **** 	while(1){
  38:../Sources/main.c **** 		while(1){
  39:../Sources/main.c **** 			while(!LineScanImageReady);
  80              		.loc 1 39 0
  81 0032 00E0     		b	.L18
  82              	.L19:
  40:../Sources/main.c **** 			LineScanImageReady = 0;
  41:../Sources/main.c **** 			printf("|");
  42:../Sources/main.c **** 			for( i = 16; i < 112; i++){
  43:../Sources/main.c **** 				char out = LineScanImage0[i] >> 10;
  44:../Sources/main.c **** 				
  45:../Sources/main.c **** 				if(out == 0) {
  46:../Sources/main.c **** 					printf(" ");								
  47:../Sources/main.c **** 				} else if(out == 1) {
  48:../Sources/main.c **** 					printf("%c", 176);								
  49:../Sources/main.c **** 				} else if(out == 2) {
  50:../Sources/main.c **** 					printf("%c", 177);
  51:../Sources/main.c **** 				} else {
  52:../Sources/main.c **** 					printf("%c", 178);
  53:../Sources/main.c **** 				}
  54:../Sources/main.c **** 			}
  55:../Sources/main.c **** 			printf("|\r\n");
  56:../Sources/main.c **** 			//delay(50);
  57:../Sources/main.c **** 			
  58:../Sources/main.c **** 			// Waits till the start button is pressed
  59:../Sources/main.c **** 			if(START_BUTTON) break;		
  60:../Sources/main.c **** 		}
  83              		.loc 1 60 0
  84 0034 C046     		mov	r8, r8
  85              	.L11:
  86              	.L18:
  39:../Sources/main.c **** 			while(!LineScanImageReady);
  87              		.loc 1 39 0
  88 0036 C046     		mov	r8, r8
  89              	.L2:
  39:../Sources/main.c **** 			while(!LineScanImageReady);
  90              		.loc 1 39 0 is_stmt 0
  91 0038 554B     		ldr	r3, .L21+4
  92 003a 1B78     		ldrb	r3, [r3]
  93 003c DBB2     		uxtb	r3, r3
  94 003e 002B     		cmp	r3, #0
  95 0040 FAD0     		beq	.L2
  40:../Sources/main.c **** 			LineScanImageReady = 0;
  96              		.loc 1 40 0 is_stmt 1
  97 0042 534B     		ldr	r3, .L21+4
  98 0044 0022     		mov	r2, #0
  99 0046 1A70     		strb	r2, [r3]
  41:../Sources/main.c **** 			printf("|");
 100              		.loc 1 41 0
 101 0048 7C20     		mov	r0, #124
 102 004a FFF7FEFF 		bl	putchar
  42:../Sources/main.c **** 			for( i = 16; i < 112; i++){
 103              		.loc 1 42 0
 104 004e 1023     		mov	r3, #16
 105 0050 7B62     		str	r3, [r7, #36]
 106 0052 2CE0     		b	.L3
 107              	.L8:
 108              	.LBB2:
  43:../Sources/main.c **** 				char out = LineScanImage0[i] >> 10;
 109              		.loc 1 43 0
 110 0054 4F4B     		ldr	r3, .L21+8
 111 0056 1A68     		ldr	r2, [r3]
 112 0058 7B6A     		ldr	r3, [r7, #36]
 113 005a 5B00     		lsl	r3, r3, #1
 114 005c D318     		add	r3, r2, r3
 115 005e 1B88     		ldrh	r3, [r3]
 116 0060 9BB2     		uxth	r3, r3
 117 0062 9B0A     		lsr	r3, r3, #10
 118 0064 9AB2     		uxth	r2, r3
 119 0066 3B1C     		mov	r3, r7
 120 0068 2333     		add	r3, r3, #35
 121 006a 1A70     		strb	r2, [r3]
  45:../Sources/main.c **** 				if(out == 0) {
 122              		.loc 1 45 0
 123 006c 3B1C     		mov	r3, r7
 124 006e 2333     		add	r3, r3, #35
 125 0070 1B78     		ldrb	r3, [r3]
 126 0072 002B     		cmp	r3, #0
 127 0074 03D1     		bne	.L4
  46:../Sources/main.c **** 					printf(" ");								
 128              		.loc 1 46 0
 129 0076 2020     		mov	r0, #32
 130 0078 FFF7FEFF 		bl	putchar
 131 007c 14E0     		b	.L5
 132              	.L4:
  47:../Sources/main.c **** 				} else if(out == 1) {
 133              		.loc 1 47 0
 134 007e 3B1C     		mov	r3, r7
 135 0080 2333     		add	r3, r3, #35
 136 0082 1B78     		ldrb	r3, [r3]
 137 0084 012B     		cmp	r3, #1
 138 0086 03D1     		bne	.L6
  48:../Sources/main.c **** 					printf("%c", 176);								
 139              		.loc 1 48 0
 140 0088 B020     		mov	r0, #176
 141 008a FFF7FEFF 		bl	putchar
 142 008e 0BE0     		b	.L5
 143              	.L6:
  49:../Sources/main.c **** 				} else if(out == 2) {
 144              		.loc 1 49 0
 145 0090 3B1C     		mov	r3, r7
 146 0092 2333     		add	r3, r3, #35
 147 0094 1B78     		ldrb	r3, [r3]
 148 0096 022B     		cmp	r3, #2
 149 0098 03D1     		bne	.L7
  50:../Sources/main.c **** 					printf("%c", 177);
 150              		.loc 1 50 0
 151 009a B120     		mov	r0, #177
 152 009c FFF7FEFF 		bl	putchar
 153 00a0 02E0     		b	.L5
 154              	.L7:
  52:../Sources/main.c **** 					printf("%c", 178);
 155              		.loc 1 52 0
 156 00a2 B220     		mov	r0, #178
 157 00a4 FFF7FEFF 		bl	putchar
 158              	.L5:
 159              	.LBE2:
  42:../Sources/main.c **** 			for( i = 16; i < 112; i++){
 160              		.loc 1 42 0
 161 00a8 7B6A     		ldr	r3, [r7, #36]
 162 00aa 0133     		add	r3, r3, #1
 163 00ac 7B62     		str	r3, [r7, #36]
 164              	.L3:
  42:../Sources/main.c **** 			for( i = 16; i < 112; i++){
 165              		.loc 1 42 0 is_stmt 0
 166 00ae 7B6A     		ldr	r3, [r7, #36]
 167 00b0 6F2B     		cmp	r3, #111
 168 00b2 CFDD     		ble	.L8
  55:../Sources/main.c **** 			printf("|\r\n");
 169              		.loc 1 55 0 is_stmt 1
 170 00b4 384B     		ldr	r3, .L21+12
 171 00b6 181C     		mov	r0, r3
 172 00b8 FFF7FEFF 		bl	puts
  59:../Sources/main.c **** 			if(START_BUTTON) break;		
 173              		.loc 1 59 0
 174 00bc 374B     		ldr	r3, .L21+16
 175 00be 1A69     		ldr	r2, [r3, #16]
 176 00c0 8023     		mov	r3, #128
 177 00c2 9B01     		lsl	r3, r3, #6
 178 00c4 1340     		and	r3, r2
 179 00c6 B5D0     		beq	.L19
 180 00c8 C046     		mov	r8, r8
  61:../Sources/main.c **** 	
  62:../Sources/main.c **** 		// Waits till the start button is pressed
  63:../Sources/main.c **** 		while(!START_BUTTON);	
 181              		.loc 1 63 0
 182 00ca C046     		mov	r8, r8
 183              	.L12:
 184              		.loc 1 63 0 is_stmt 0
 185 00cc 334B     		ldr	r3, .L21+16
 186 00ce 1A69     		ldr	r2, [r3, #16]
 187 00d0 8023     		mov	r3, #128
 188 00d2 9B01     		lsl	r3, r3, #6
 189 00d4 1340     		and	r3, r2
 190 00d6 F9D0     		beq	.L12
  64:../Sources/main.c **** 		
  65:../Sources/main.c **** 		sensitivity = getSensitivity();
 191              		.loc 1 65 0 is_stmt 1
 192 00d8 FFF7FEFF 		bl	getSensitivity
 193 00dc 031C     		mov	r3, r0
 194 00de FB61     		str	r3, [r7, #28]
  66:../Sources/main.c **** 		speed = getSpeed();
 195              		.loc 1 66 0
 196 00e0 FFF7FEFF 		bl	getSpeed
 197 00e4 031C     		add	r3, r0, #0
 198 00e6 BB61     		str	r3, [r7, #24]
  67:../Sources/main.c **** 		TFC_HBRIDGE_ENABLE;
 199              		.loc 1 67 0
 200 00e8 2D4B     		ldr	r3, .L21+20
 201 00ea 8022     		mov	r2, #128
 202 00ec 9203     		lsl	r2, r2, #14
 203 00ee 5A60     		str	r2, [r3, #4]
  68:../Sources/main.c **** 		
  69:../Sources/main.c **** 		printf("{\"version\":0,\"sensitivity\":%d,\"speed\":%d,\"data\":[", sensitivity, (int)(speed*100)
 204              		.loc 1 69 0
 205 00f0 B869     		ldr	r0, [r7, #24]
 206 00f2 2C49     		ldr	r1, .L21+24
 207 00f4 FFF7FEFF 		bl	__aeabi_fmul
 208 00f8 031C     		add	r3, r0, #0
 209 00fa 181C     		add	r0, r3, #0
 210 00fc FFF7FEFF 		bl	__aeabi_f2iz
 211 0100 031C     		mov	r3, r0
 212 0102 2949     		ldr	r1, .L21+28
 213 0104 FA69     		ldr	r2, [r7, #28]
 214 0106 081C     		mov	r0, r1
 215 0108 111C     		mov	r1, r2
 216 010a 1A1C     		mov	r2, r3
 217 010c FFF7FEFF 		bl	printf
  70:../Sources/main.c **** 		
  71:../Sources/main.c **** 		while(run){
 218              		.loc 1 71 0
 219 0110 2EE0     		b	.L13
 220              	.L17:
  72:../Sources/main.c **** 			
  73:../Sources/main.c **** 			if(first){	
 221              		.loc 1 73 0
 222 0112 BB6A     		ldr	r3, [r7, #40]
 223 0114 002B     		cmp	r3, #0
 224 0116 02D0     		beq	.L14
  74:../Sources/main.c **** 				first = 0;
 225              		.loc 1 74 0
 226 0118 0023     		mov	r3, #0
 227 011a BB62     		str	r3, [r7, #40]
 228 011c 02E0     		b	.L15
 229              	.L14:
  75:../Sources/main.c **** 			} else {
  76:../Sources/main.c **** 				printf(",");
 230              		.loc 1 76 0
 231 011e 2C20     		mov	r0, #44
 232 0120 FFF7FEFF 		bl	putchar
 233              	.L15:
  77:../Sources/main.c **** 			}
  78:../Sources/main.c **** 			
  79:../Sources/main.c **** 			// Reads the data from the camera
  80:../Sources/main.c **** 			cameraData = getCamera();	
 234              		.loc 1 80 0
 235 0124 FFF7FEFF 		bl	getCamera
 236 0128 031C     		mov	r3, r0
 237 012a 7B61     		str	r3, [r7, #20]
  81:../Sources/main.c **** 			
  82:../Sources/main.c **** 			// Sets the command based on the camera data and returns whether to stop or not
  83:../Sources/main.c **** 			run = getCommand( cameraData, &command, sensitivity, speed );	
 238              		.loc 1 83 0
 239 012c 7869     		ldr	r0, [r7, #20]
 240 012e 391D     		add	r1, r7, #4
 241 0130 FA69     		ldr	r2, [r7, #28]
 242 0132 BB69     		ldr	r3, [r7, #24]
 243 0134 FFF7FEFF 		bl	getCommand
 244 0138 031C     		mov	r3, r0
 245 013a FB62     		str	r3, [r7, #44]
  84:../Sources/main.c **** 			
  85:../Sources/main.c **** 			// Debug mode
  86:../Sources/main.c **** 			if(0){	
  87:../Sources/main.c **** 				
  88:../Sources/main.c **** 				// Sends the command and camera data over serial
  89:../Sources/main.c **** 				print(command, cameraData);
  90:../Sources/main.c **** 				
  91:../Sources/main.c **** 				// Run mode	
  92:../Sources/main.c **** 			} else {	
  93:../Sources/main.c **** 				
  94:../Sources/main.c **** 				// Sends the command and camera data over serial to be stored
  95:../Sources/main.c **** 				print(command, cameraData);
 246              		.loc 1 95 0
 247 013c 3B1D     		add	r3, r7, #4
 248 013e 7A69     		ldr	r2, [r7, #20]
 249 0140 0092     		str	r2, [sp]
 250 0142 1868     		ldr	r0, [r3]
 251 0144 5968     		ldr	r1, [r3, #4]
 252 0146 9A68     		ldr	r2, [r3, #8]
 253 0148 DB68     		ldr	r3, [r3, #12]
 254 014a FFF7FEFF 		bl	print
  96:../Sources/main.c **** 				
  97:../Sources/main.c **** 				// Applies the command to the car
  98:../Sources/main.c **** 				apply(command);
 255              		.loc 1 98 0
 256 014e 3B1D     		add	r3, r7, #4
 257 0150 1868     		ldr	r0, [r3]
 258 0152 5968     		ldr	r1, [r3, #4]
 259 0154 9A68     		ldr	r2, [r3, #8]
 260 0156 DB68     		ldr	r3, [r3, #12]
 261 0158 FFF7FEFF 		bl	apply
  99:../Sources/main.c **** 				
 100:../Sources/main.c **** 			}
 101:../Sources/main.c **** 
 102:../Sources/main.c **** 			// Frees the malloc'd memory for cameraData and command
 103:../Sources/main.c **** 			free(cameraData);
 262              		.loc 1 103 0
 263 015c 7B69     		ldr	r3, [r7, #20]
 264 015e 181C     		mov	r0, r3
 265 0160 FFF7FEFF 		bl	free
 104:../Sources/main.c **** 			
 105:../Sources/main.c **** 			// Exits the loop if the stop button is pressed
 106:../Sources/main.c **** 			if(STOP_BUTTON) break;
 266              		.loc 1 106 0
 267 0164 0D4B     		ldr	r3, .L21+16
 268 0166 1A69     		ldr	r2, [r3, #16]
 269 0168 8023     		mov	r3, #128
 270 016a 9B02     		lsl	r3, r3, #10
 271 016c 1340     		and	r3, r2
 272 016e 03D1     		bne	.L20
 273              	.L13:
  71:../Sources/main.c **** 		while(run){
 274              		.loc 1 71 0
 275 0170 FB6A     		ldr	r3, [r7, #44]
 276 0172 002B     		cmp	r3, #0
 277 0174 CDD1     		bne	.L17
 278 0176 00E0     		b	.L16
 279              	.L20:
 280              		.loc 1 106 0
 281 0178 C046     		mov	r8, r8
 282              	.L16:
 107:../Sources/main.c **** 		}
 108:../Sources/main.c **** 		
 109:../Sources/main.c **** 		TFC_HBRIDGE_DISABLE;
 283              		.loc 1 109 0
 284 017a 094B     		ldr	r3, .L21+20
 285 017c 8022     		mov	r2, #128
 286 017e 9203     		lsl	r2, r2, #14
 287 0180 9A60     		str	r2, [r3, #8]
 110:../Sources/main.c **** 		
 111:../Sources/main.c **** 		printf("]}");
 288              		.loc 1 111 0
 289 0182 0A4B     		ldr	r3, .L21+32
 290 0184 181C     		mov	r0, r3
 291 0186 FFF7FEFF 		bl	printf
 112:../Sources/main.c **** 		
 113:../Sources/main.c **** 	}
 292              		.loc 1 113 0
 293 018a 54E7     		b	.L11
 294              	.L22:
 295              		.align	2
 296              	.L21:
 297 018c A8610000 		.word	25000
 298 0190 00000000 		.word	LineScanImageReady
 299 0194 00000000 		.word	LineScanImage0
 300 0198 00000000 		.word	.LC2
 301 019c 80F00F40 		.word	1074786432
 302 01a0 00F10F40 		.word	1074786560
 303 01a4 0000C842 		.word	1120403456
 304 01a8 04000000 		.word	.LC4
 305 01ac 38000000 		.word	.LC6
 306              		.cfi_endproc
 307              	.LFE0:
 309              		.text
 310              	.Letext0:
 311              		.file 2 "C:/Freescale/CW MCU v10.6/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 312              		.file 3 "C:/Users/Jared/Desktop/freescalecup/FRDM-TFC/Project_Headers/MKL25Z4.h"
 313              		.file 4 "../Sources/Common.h"
 314              		.file 5 "C:/Users/Jared/Desktop/freescalecup/FRDM-TFC/Project_Headers/TFC\\TFC_LineScanCamera.h"
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Jared\AppData\Local\Temp\ccZwaXC8.s:18     .rodata:00000000 $d
C:\Users\Jared\AppData\Local\Temp\ccZwaXC8.s:31     .text.main:00000000 $t
C:\Users\Jared\AppData\Local\Temp\ccZwaXC8.s:36     .text.main:00000000 main
C:\Users\Jared\AppData\Local\Temp\ccZwaXC8.s:297    .text.main:0000018c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_fmul
__aeabi_f2iz
init
TFC_SetLineScanExposureTime
putchar
puts
getSensitivity
getSpeed
printf
getCamera
getCommand
print
apply
free
LineScanImageReady
LineScanImage0
